<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Page1</title>
<meta name="generator" content="WYSIWYG Web Builder 16 - http://www.wysiwygwebbuilder.com">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<link href="base/jquery-ui.min.css" rel="stylesheet">
<link href="Untitled1.css" rel="stylesheet">
<link href="index.css" rel="stylesheet">
<script src="jquery-1.12.4.min.js"></script>
<script src="util.min.js"></script>
<script src="carousel.min.js"></script>
<script src="jquery-ui.min.js"></script>
<script>
$(document).ready(function()
{
   $("#Carousel1").bootstrapcarousel({interval:3000, pause: false});
   $("#Spinner1").spinner(
   {
      min: 1,
      max: 100,
      step: 1
   });
});
</script>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid" id="top">
        <a class="navbar-brand" href="/">FCU 租借網</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">

            <!--<form class="d-flex">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success" type="submit">Search</button>
            </form>-->
        </div>
        <div id="welcome"></div>
    </div>
</nav>
<div id="wb_carouselGrid">
<div id="carouselGrid">
<div class="row">
<div class="col-12 col-lg-6" id="picture">
<!--
<div id="wb_Carousel1">
<div id="Carousel1" class="carousel slide" data-ride="carousel">
<ol class="carousel-indicators">
<li data-target="#Carousel1" data-slide-to="0" class="active"></li>
<li data-target="#Carousel1" data-slide-to="1"></li>
<li data-target="#Carousel1" data-slide-to="2"></li>
</ol>
<div class="carousel-inner">
<div class="carousel-item frame-1 active">
<div class="carousel-innerframe">
</div>
</div>
<div class="carousel-item frame-2">
<div class="carousel-innerframe">
</div>
</div>
<div class="carousel-item frame-3">
<div class="carousel-innerframe">
</div>
</div>
</div>

<a class="carousel-item-left carousel-control" href="#Carousel1" role="button" data-slide="prev">
<span class="carousel-control-prev-icon" aria-hidden="true"></span><span class="sr-only">Previous</span>
</a>
<a class="carousel-item-right carousel-control" href="#Carousel1" role="button" data-slide="next">
<span class="carousel-control-next-icon" aria-hidden="true"></span><span class="sr-only">Next</span>
</a>
</div>
</div>
-->
</div>
<div class="col-12 col-lg-6">
<div id="wb_Text4">
</div>
    <div class="wb_LayoutGrid2">
        <div class="LayoutGrid2">
            <div class="row">
                <div class="col-12 col-sm-10 col-md-10 col-lg-10 ">
                    <div id="wb_Text2">
                        <span style="color:#000000;font-family:微軟正黑體;font-size:16px;">可租 </span>
                        <span id="day"></span>
                        <span style="color:#000000;font-family:微軟正黑體;font-size:16px;">天</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="wb_LayoutGrid3">
        <div class="LayoutGrid3">
            <div class="row">
                <div class="col-12 col-sm-10 col-md-10 col-lg-10 ">
                    <div id="wb_Text5">
                        <span style="color:#000000;font-family:微軟正黑體;font-size:16px;">要租</span>
                        <input id="add2" name="" type="button" value="+" >
                        <input id="num2" name="num" type="text" value="1" >
                        <input id="min2" name="" type="button" value="-" >
                        <span style="color:#000000;font-family:微軟正黑體;font-size:16px;">天</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="wb_LayoutGrid3">
        <div class="LayoutGrid3">
            <div class="row">
                <div class="col-12 col-sm-10 col-md-10 col-lg-10">
                    <div id="wb_Text1">
                        <span style="color:#000000;font-family:微軟正黑體;font-size:16px;">數量</span>
                    <input id="add" name="" type="button" value="+" >
                    <input id="num" name="num" type="text" value="1" >
                    <input id="min" name="" type="button" value="-" >
                        <span style="color:#000000;font-family:微軟正黑體;font-size:16px;">件</span>
                </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-12 col-sm-10 col-md-10 col-lg-10" >
        <input type="submit" id="Button1" name="" value="加入購物車">
    </div>
</div>
</div>
</div>
</div>
<div id="wb_BlockQuote">
<div id="BlockQuote-overlay"></div>
<div id="BlockQuote">
<div class="row">
<div class="col-1">
<div id="wb_Quote">
    <h4>商品介紹</h4><br>
</div>
</div>
</div>
</div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<!-- Option 1: Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
<script>

function setTotal(){
		var t = $("#num");
		}

$(function(){ //這裡是加減按鈕都啟用的情況
	var t = $("#num");
	$("#add").click(function(){
		t.val(parseInt(t.val())+1)
		setTotal();
	})
	$("#min").click(function(){
		if(t.val()>1){
		t.val(parseInt(t.val())-1);
		}
		else{
		alert("至少購買一件哦！");
		}
		setTotal();
	})
});

function setTotal(){
		var t = $("#num2");
		}

$(function(){ //這裡是加減按鈕都啟用的情況
	var t = $("#num2");
	$("#add2").click(function(){
		t.val(parseInt(t.val())+1)
		setTotal();
	})
	$("#min2").click(function(){
		if(t.val()>1){
		t.val(parseInt(t.val())-1);
		}
		else{
		alert("至少租一天喔！");
		}
		setTotal();
	})
});

function setCookie(name){
  let arr = document.cookie.match(new RegExp("(^| )" + name + "=([^;]*)(;|$)"));
  if (arr != null) return unescape(arr[2]);
  return null;
}
//刪除cookie
function delCookie(name){
  var exp = new Date();
  exp.setTime(exp.getTime() - 1);
  var cval = setCookie(name);
  if (cval != null)
    document.cookie = name + "=" + cval + ";expires=" + exp.toGMTString()+";path=/";
}
function getCookie(name){
var cookies = document.cookie;
var list = cookies.split("; ");// 解析出名/值對列表
for(var i =0; i < list.length; i++){
var arr = list[i].split("=");// 解析出名和值
if(arr[0]== name)
return decodeURIComponent(arr[1]);// 對cookie值解碼
}
return"";
}
  $( document ).ready( function() {
    console.log( "ready!" );
    const id = getCookie('id');
    const name = getCookie('name');
    let html= '<h5> welcome   ' + name + '</h5>';
    $('#welcome').append(html);
    const productid = getCookie('productid');
    const url='../products/shop/'+productid;
    console.log(url);
    getProducts(url);
  });
    function addProducts(products) {
      for ( let product of products ) {
        let html = '<h1>'+product.name+'</h1>';
        $('#wb_Text4').append(html);
        html ='<img src="' + product.imageUrl + '" width="450" height="500" alt="' + product.name + '">';
        $('#picture').append(html);
        html = '<span style="color:#000000;font-family:微軟正黑體;font-size:13px;">'+ product.time +' </span>'
        $('#day').append(html);
        html = '<span style="color:#000000; font-family:微軟正黑體; font-size:16px;">' + product.description + '</span>';
        $('#wb_Quote').append(html);

        /*html += '<img src="' + product.imageUrl + '" class="card-img-top" alt="' + product.name + '">';
        html += '<div class="card-body">';
        html += '<h5 class="card-title">' + product.name + '</h5>';
        html += '<p class="card-text">'+'ID:' + product.id + '</p>';
        html += '<p class="card-text">' + product.description + '</p>';
        html += '<a href="#" class="btn btn-primary" onclick="handler(';
        html +=product.id+'); return false;">' + product.price + '</a>';
        html += '</div>';
        html += '</div>';
        */
      }
    }
    function getProducts(targetUrl) {
      // Using the core $.ajax() method
      $.ajax({
          // The URL for the request
          url: targetUrl,

          // Whether this is a POST or GET request
          type: "GET",

          // The type of data we expect back
          dataType : "json",
      })
        // Code to run if the request succeeds (is done);
        // The response is passed to the function
        .done(function( json ) {
          let products = json;
          addProducts(products);
        })
        // Code to run if the request fails; the raw request and
        // status codes are passed to the function
        .fail(function( xhr, status, errorThrown ) {
          console.log( "Sorry, there was a problem!" );
          console.log( "Error: " + errorThrown );
          console.log( "Status: " + status );
          console.dir( xhr );
        })
        // Code to run regardless of success or failure;
        .always(function( xhr, status ) {
          console.log( "The request is complete!" );
        });
    }

</script>
</body>
</html>